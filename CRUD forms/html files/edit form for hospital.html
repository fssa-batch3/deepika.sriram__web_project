<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>hospital details</title>
    <link rel="stylesheet" href="../../../assets/css/register.css">
    <link rel="icon" href="../../../assets/images/hospital logo 3.JPG">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Courgette&family=Hammersmith+One&family=Kumbh+Sans:wght@100;200;300;400;500;600;700;800;900&family=Roboto+Condensed:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Roboto+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,300;1,400;1,500;1,600;1,700&family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&family=Source+Serif+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap"
        rel="stylesheet">
</head>

<body>
    <form role="form" onsubmit="update(event)">
        <img src="../../../assets/images/hospital_logo_3-removebg-preview.png" style="width:30%;margin-left:35%"
            alt="logo of get well soon">
        <br>
        <!-- <label>enter uuid</label>
        <input type="text" id="uuid" />
        <button type="submit" onsubmit="showData(event)">enter</button> -->
        <h1 style="text-align: center;color:#03045e">FORM</h1>
        <br>
        <label>hospital_name</label>
        <br><br>
        <input type="text" id="hosp_name" style="width:100%;height:30px" disabled />
        <br><br>
        <label>Address</label>
        <br><br>
        <input type="text" id="address" style="width:100%;height:30px" placeholder="address" disabled />
        <br><br>
        <label>Alternate</label>
        <br><br>
        <input type="text" id="alt" style="width:100%;height:30px" placeholder="alternate text for image" disabled />
        <br><br>
        <label>Link file</label>
        <br><br>
        <input type="text" id="link_file" style="width:100%;height:30px" placeholder="link file" disabled />
        <br><br>
        <label>Contact number</label>
        <br><br>
        <input type="tel" id="con_no" style="width:100%;height:30px" placeholder="contact number" disabled />
        <br><br>
        <label>Email address</label>
        <br><br>
        <input type="email" id="hosp_email" style="width:100%;height:30px" placeholder="email address" disabled />
        <br><br>
        <label>image of hospital</label>
        <br><br>
        <input type="text" id="img_file" placeholder="upload url of image of a hospital" style="width:100%;height:30px"
            disabled />
        <br><br>
        <button type="submit">Submit</button>
        <button type="submit">Edit details</button>
        <button type="button" onclick="deleteDet(event)"> Delete details </button>
    </form>
    <script>
        //get value from local storage
        let unique_id = localStorage.getItem("unique_id");
        let hospital_detail = JSON.parse(localStorage.getItem("hospital_detail"));
        console.log(hospital_detail);
        console.log(unique_id);
        function hosp_data(e) {
            return e.uuid == unique_id;
        }
        hospital_data = hospital_detail.find(hosp_data);
        console.log(hospital_data);

        document.getElementById("hosp_name").value = hospital_data['hospital_name'];
        document.getElementById("address").value = hospital_data['address'];
        document.getElementById("alt").value = hospital_data['alternate'];
        document.getElementById("link_file").value = hospital_data["link_file"];
        document.getElementById("con_no").value = hospital_data["contact_number"];
        document.getElementById("hosp_email").value = hospital_data["email_address"];
        document.getElementById("img_file").value = hospital_data["image_link"];

        function update(e){
            e.preventDefault();
            let up_hospital_name = document.getElementById("hosp_name").value
            let up_address = document.getElementById("address").value
            let up_alternate = document.getElementById("alt").value
            let up_link_file = document.getElementById("link_file").value
            let up_contact_number = document.getElementById("con_no").value
            let up_email_address = document.getElementById("hosp_email").value
            let up_image_link = document.getElementById("img_file").value
            hospital_data["hospital_name"]= up_hospital_name
            hospital_data["address"]= up_address
            hospital_data["alternate"]=up_alternate
            hospital_data["link_file"]=up_link_file
            hospital_data["contact_number"]=up_contact_number
            hospital_data["email_address"]=up_email_address
            hospital_data["image_link"]=up_image_link
            localStorage.setItem("hospital_detail", JSON.stringify(hospital_detail))
        }


        // delete account function
        function deleteDet() {
            if (confirm("Are you sure to delete this detail ?")) {
                let unique_id = localStorage.getItem("unique_id");
                let hospital_detail = JSON.parse(localStorage.getItem("hospital_detail"));
                console.log(hospital_detail);
                console.log(unique_id);


                function hosp_data(e) {
                    return e.uuid == unique_id;
                }
                hospital_data = hospital_detail.find(hosp_data);

                // find the index of hospital_data from userData
                let result = hospital_detail.indexOf(hospital_data);
                // deleting the indexof person data
                hospital_detail.splice(result, 1);
                localStorage.setItem("hospital_detail", JSON.stringify(hospital_detail));
                window.location.href = "../../index.html";
            }
        }
    </script>
</body>

</html>