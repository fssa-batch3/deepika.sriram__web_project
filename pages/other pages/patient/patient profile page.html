<!DOCTYPE html>
<html lang="en">
    <head>
        <title>patient profile page</title>
        <link rel="stylesheet" href="../../../assets/css/my project 3.css">
        <meta name='viewport' content='width=device-width, initial-scale=1'>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="icon" href="../../../assets/images/hospital logo 3.JPG">
        <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Courgette&family=Hammersmith+One&family=Kumbh+Sans:wght@100;200;300;400;500;600;700;800;900&family=Roboto+Condensed:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Roboto+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,300;1,400;1,500;1,600;1,700&family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&family=Source+Serif+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap" rel="stylesheet">
    </head>
    <body>
        <header>
            <div>
                <img src="../../../assets/images/gws.png" alt="logo of get well soon website">
            </div>
            <div>
                <ul id="hide">
                    <li>
                        <a href="../../homepage/home page.html"> Home </a>
                    </li>
                    <li>
                        <a href="#">Contact us</a>
                    </li>
                    <li>
                        <a href="../other pages/about us.html">About us</a>
                    </li>
                    <li>
                        <a href="../patient/patient profile page.html"><i class="fas fa-user" alt="profile"></i></a>
                    </li>
                </ul>
            </div>
        </header>
        <main>
            <form>
                <h1 style="margin-left:20px;text-align:center">Profile <i class="fas fa-user" ></i></h1>
                <div>
                    <label>Username</label>
                </div>
                <br>
                <div>
                    <input type="text" id="first_name" style="width:95%;height:30px;border:0.5px solid black;padding-left: 10px" disabled/>
                </div>
                <br>
                <div class="frm">
                    <div>
                        <div>
                            <label>Age</label>
                        </div>
                        <br>
                        <div>
                            <input type="number" id="age" style="width:50%;height:30px;border:0.5px solid black;padding-left: 10px" />
                        </div>
                    </div>
                    <div style="margin-left:20px">
                        <div>
                            <label>Gender</label>
                        </div>
                        <br>
                        <br>
                        <div>
                            <input type="radio" id="male" name="M_F_O" />
                            <label>male</label>
                            <input type="radio" id="female" name="M_F_O">
                            <label>female</label>
                            <input type="radio" id="others" name="M_F_O" />
                            <label>others</label>
                        </div>
                    </div>
                </div>
                <br>
                <div>
                    <label>Mobile number</label>
                </div>
                <br>
                <div>
                    <input type="tel" id="mobile_number" style="width:90%;height:30px;border:0.5px solid black;padding-left: 10px" disabled/>
                </div>
                <br>
                <div>
                    <div>
                        <div>
                            <label>E-mail id</label>
                        </div>
                        <br>
                        <div>
                            <input type="email" id="user_email" style="width:99%;height:30px;border:0.5px solid black;padding-left:10px" disabled/>
                        </div>
                    </div>
                </div>
                <br>
                <div id="frm">
                    <div style="margin-top:5%">
                        <a href="../patient/patient edit profile page.html">
                            <button type="button">Edit profile</button>
                        </a>
                    </div>
                    <div style="margin-top:5%;">
                        <a href="../../homepage/home page.html">
                            <button type="button">Skip</button>
                        </a>
                    </div>
                    <div>
                        <button type="button" onclick="deleteAcc(event)">delete profile</button>
                    </div>
                </div>
            </form>
        </main>
        <script>
            //get value from local storage
            let unique_id = JSON.parse(localStorage.getItem("unique_id"));
            let user_detail = JSON.parse(localStorage.getItem("user_detail"));
            console.log(user_detail);
            console.log(unique_id);


            function profile_data(e){
                return e.email_id == unique_id;
            }
            person_data = user_detail.find(profile_data);
            console.log(person_data)

            document.getElementById("first_name").value = person_data["f_name"]+" "+person_data["l_name"];
            document.getElementById("age").value = person_data["age"]
            document.getElementById("female").value = person_data["gender"]
            document.getElementById("user_email").value = person_data["email_id"];
            document.getElementById("mobile_number").value = person_data["mobile"];

            // delete account function
            function deleteAcc(){
                if(confirm("Are you sure to delete this account ?")){
                    let unique_id = JSON.parse(localStorage.getItem("unique_id"));
                    let user_detail = JSON.parse(localStorage.getItem("user_detail"));
                    console.log(user_detail);
                    console.log(unique_id);


                    function profile_data(e){
                        return e.email_id == unique_id;
                    }
                    person_data = user_detail.find(profile_data);
                    
                    // find the index of person_data from userData
                    let result =user_detail.indexOf(person_data);
                    // deleting the indexof person data
                    user_detail.splice(result, 1);
                    localStorage.setItem("user_detail", JSON.stringify(user_detail));
                    window.location.href="../../index.html";
                }
            }
        </script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/js/all.min.js" integrity="sha512-rpLlll167T5LJHwp0waJCh3ZRf7pO6IT1+LZOhAyP6phAirwchClbTZV3iqL3BMrVxIYRbzGTpli4rfxsCK6Vw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    </body>
</html>